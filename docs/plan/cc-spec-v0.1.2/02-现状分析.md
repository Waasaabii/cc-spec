# cc-spec v1.2 - ç°çŠ¶åˆ†æ

## 1. v1.1 ä»£ç å®ç°å®¡è®¡

### 1.1 ID ç®¡ç†ç³»ç»Ÿ (`core/id_manager.py`)

**è®¾è®¡è¦æ±‚ vs å®ç°**:

| åŠŸèƒ½ | è®¾è®¡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| IDType æšä¸¾ | CHANGE/TASK/SPEC/ARCHIVE | âœ… å®Œæ•´ | âœ… |
| ParsedID dataclass | change_id, task_id, type | âœ… å®Œæ•´ | âœ… |
| generate_change_id() | C-XXX æ ¼å¼ | âœ… å®Œæ•´ | âœ… |
| parse_id() | è§£æå„ç§ ID æ ¼å¼ | âœ… å®Œæ•´ | âœ… |
| resolve_path() | ID è½¬æ¢ä¸ºè·¯å¾„ | âœ… å®Œæ•´ | âœ… |
| register_change() | æ³¨å†Œæ–°å˜æ›´ | âœ… å®Œæ•´ | âœ… |
| _load_id_map() / _save_id_map() | æŒä¹…åŒ– | âœ… å®Œæ•´ | âœ… |

**ç»“è®º**: å®Œæ•´å®ç°ï¼Œæ— ç¼ºå£

### 1.2 å‘½ä»¤ ID æ”¯æŒ

| å‘½ä»¤ | è®¾è®¡ç­¾å | å®é™…ç­¾å | çŠ¶æ€ |
|------|----------|----------|------|
| specify | `specify <name-or-id>` | `specify(name_or_id: str)` | âœ… |
| clarify | `clarify [id-or-task]` | `clarify(id_or_task: str = None)` | âœ… |
| plan | `plan [change-or-id]` | `plan_command(change_or_id: str = None)` | âœ… |
| apply | `apply [change-or-id]` | `apply_command(change_or_id: str = None)` | âœ… |
| checklist | `checklist [change-or-id]` | `checklist_command(change_or_id: str = None)` | âœ… |
| archive | `archive [change-or-id]` | `archive_command(change_or_id: str = None)` | âœ… |

**ç»“è®º**: æ‰€æœ‰å‘½ä»¤éƒ½å·²æ”¯æŒ IDï¼Œå®Œæ•´å®ç°

### 1.3 list å‘½ä»¤ (`commands/list.py`)

**è®¾è®¡è¦æ±‚ vs å®ç°**:

| åŠŸèƒ½ | è®¾è®¡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| list_changes() | åˆ—å‡ºæ‰€æœ‰å˜æ›´ | âœ… å®Œæ•´ | âœ… |
| list_tasks() | åˆ—å‡ºä»»åŠ¡ | âœ… å®Œæ•´ | âœ… |
| list_specs() | åˆ—å‡ºè§„æ ¼ | âœ… å®Œæ•´ | âœ… |
| list_archive() | åˆ—å‡ºå½’æ¡£ | âœ… å®Œæ•´ | âœ… |
| --status è¿‡æ»¤ | æŒ‰çŠ¶æ€è¿‡æ»¤ | âœ… å®Œæ•´ | âœ… |
| --format | table/json/simple | âœ… å®Œæ•´ | âœ… |

**ç»“è®º**: å®Œæ•´å®ç°ï¼Œæ— ç¼ºå£

### 1.4 goto å‘½ä»¤ (`commands/goto.py`)

**è®¾è®¡è¦æ±‚ vs å®ç°**:

| åŠŸèƒ½ | è®¾è®¡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| goto_change() | è·³è½¬å˜æ›´ | âœ… å®Œæ•´ | âœ… |
| goto_task() | è·³è½¬ä»»åŠ¡ | âœ… å®Œæ•´ | âœ… |
| çŠ¶æ€æ„ŸçŸ¥é€‰é¡¹ | æ ¹æ®é˜¶æ®µæ˜¾ç¤ºæ“ä½œ | âœ… å®Œæ•´ | âœ… |
| --force | å¼ºåˆ¶è·³è½¬ | âœ… å®Œæ•´ | âœ… |
| äº¤äº’å¼èœå• | é€‰æ‹©ä¸‹ä¸€æ­¥æ“ä½œ | âœ… å®Œæ•´ | âœ… |
| è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤ | é€‰æ‹©åæ‰§è¡Œ | âŒ åªæ‰“å° | âš ï¸ |

**å·®å¼‚**: é€‰æ‹©ååªæ‰“å°å‘½ä»¤æç¤º `[cyan]Run:[/cyan] {cmd}`ï¼Œä¸è‡ªåŠ¨æ‰§è¡Œ

### 1.5 update å‘½ä»¤ (`commands/update.py`)

**è®¾è®¡è¦æ±‚ vs å®ç°**:

| åŠŸèƒ½ | è®¾è®¡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| update commands | æ›´æ–°æ–œæ å‘½ä»¤ | âœ… å®Œæ•´ | âœ… |
| update subagent | æ›´æ–°é…ç½® | âœ… å®Œæ•´ | âœ… |
| --add-agent | æ·»åŠ  AI å·¥å…· | âœ… å®Œæ•´ | âœ… |
| --templates | æ›´æ–°æ¨¡æ¿ | âš ï¸ åªæ£€æŸ¥ | âš ï¸ |
| agents | æ˜¾ç¤ºå·¥å…·åˆ—è¡¨ | âœ… å®Œæ•´ | âœ… |
| æ‰˜ç®¡æ ‡è®°å— | ä¿æŠ¤ç”¨æˆ·ä¿®æ”¹ | âœ… å®Œæ•´ | âœ… |

**å·®å¼‚**: `_update_templates()` åªæ˜¯æ£€æŸ¥æ–‡ä»¶å­˜åœ¨ï¼Œæ‰“å°æ•°é‡ï¼Œæ²¡æœ‰å®é™…æ›´æ–°é€»è¾‘

```python
# å½“å‰å®ç° (update.py:354-377)
def _update_templates(cc_spec_root: Path, force: bool) -> None:
    template_files = list(templates_dir.glob("**/*.md.j2"))
    console.print("[green]âœ“[/green] Templates are up to date")  # å‡å®Œæˆ
```

### 1.6 å‘½ä»¤ç”Ÿæˆå™¨ (`core/command_generator.py`)

**è®¾è®¡è¦æ±‚**: 17+ AI å·¥å…·æ”¯æŒ

**å®é™…å®ç°**: 9 ä¸ªå·¥å…·

```python
COMMAND_GENERATORS = {
    "claude": ClaudeCommandGenerator,
    "cursor": CursorCommandGenerator,
    "gemini": GeminiCommandGenerator,
    "copilot": CopilotCommandGenerator,
    "amazonq": AmazonQCommandGenerator,
    "windsurf": WindsurfCommandGenerator,
    "qwen": QwenCommandGenerator,
    "codeium": CodeiumCommandGenerator,
    "continue": ContinueCommandGenerator,
}
```

**ç¼ºå¤±å·¥å…·**:
- tabnine
- sourcegraph
- aider
- devin
- replit
- codex
- cody
- supermaven
- kilo
- auggie
- codebuddy
- qoder
- roo
- bob
- shai
- amp

### 1.7 SubAgent Profile (`core/config.py`)

**è®¾è®¡è¦æ±‚ vs å®ç°**:

| åŠŸèƒ½ | è®¾è®¡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| SubAgentProfile dataclass | model/timeout/permissionMode/tools | âœ… å®Œæ•´ | âœ… |
| SubAgentConfig.common | é€šç”¨é…ç½® | âœ… å®Œæ•´ | âœ… |
| SubAgentConfig.profiles | é…ç½®å­—å…¸ | âœ… å®Œæ•´ | âœ… |
| get_profile() | ç»§æ‰¿åˆå¹¶ | âœ… å®Œæ•´ | âœ… |

**ç»“è®º**: é…ç½®æ¨¡å—å®Œæ•´å®ç°

### 1.8 task_parser Profile æ”¯æŒ

**è®¾è®¡è¦æ±‚**:
```markdown
### Task: 01-SETUP
**Profile**: quick  â† æŒ‡å®šä½¿ç”¨ quick é…ç½®
```

**å®é™…å®ç°** (`subagent/task_parser.py`):

```python
# æœªæ‰¾åˆ° Profile å­—æ®µè§£æä»£ç 
# TaskInfo dataclass ä¸­æ²¡æœ‰ profile å­—æ®µ
```

**å·®å¼‚**: task_parser ä¸æ”¯æŒ Profile å­—æ®µï¼Œapply å‘½ä»¤æ— æ³•æ ¹æ®ä»»åŠ¡é€‰æ‹©é…ç½®

### 1.9 Config agents å­—æ®µ

**è®¾è®¡è¦æ±‚**:
```yaml
agents:
  enabled:
    - claude
    - cursor
  available:
    - claude
    - cursor
    - gemini
    # ... 17+
```

**å®é™…å®ç°** (`core/config.py`):
```python
@dataclass
class Config:
    version: str = "1.0"  # ä»ç„¶æ˜¯ 1.0ï¼Œä¸æ˜¯ 1.1
    agent: str = "claude"  # å•ä¸€å·¥å…·å­—æ®µ
    # æ²¡æœ‰ agents å­—æ®µ
```

**å·®å¼‚**:
- ç‰ˆæœ¬å·ä»ä¸º "1.0"
- åªæ”¯æŒå•ä¸€ agent å­—æ®µ
- ç¼ºå°‘ agents.enabled[] å¤šå·¥å…·é…ç½®

## 2. æ–‡æ¡£çŠ¶æ€å·®å¼‚

### 2.1 v1.1 ä»»åŠ¡æ‹†åˆ†æ–‡æ¡£ (`docs/plan/cc-spec-v1.1/05-ä»»åŠ¡æ‹†åˆ†.md`)

| Task ID | ä»»åŠ¡å | æ–‡æ¡£çŠ¶æ€ | å®é™…çŠ¶æ€ | å·®å¼‚ |
|---------|--------|----------|----------|------|
| 20-ID-MANAGER | IDç®¡ç†æ¨¡å— | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 21-CMD-LIST | listå‘½ä»¤ | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 22-CMD-GOTO | gotoå‘½ä»¤ | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 23-CMD-UPDATE | updateå‘½ä»¤ | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 24-CMD-SPECIFY-ID | specifyæ”¯æŒID | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 25-CMD-CLARIFY-ID | clarifyæ”¯æŒID | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 26-CMD-PLAN-ID | planæ”¯æŒID | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 27-CMD-APPLY-ID | applyæ”¯æŒID | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 28-CMD-OTHERS-ID | checklist/archiveæ”¯æŒID | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 29-SUBAGENT-PROFILE | Subagenté…ç½® | ğŸŸ¦ ç©ºé—² | âœ… å®Œæˆ | âš ï¸ |
| 30-CMD-GENERATOR | å‘½ä»¤ç”Ÿæˆå™¨ | ğŸŸ¦ ç©ºé—² | âš ï¸ éƒ¨åˆ† | âš ï¸ |
| 31-CMD-TEMPLATES | å‘½ä»¤æ¨¡æ¿ | ğŸŸ¦ ç©ºé—² | âš ï¸ éƒ¨åˆ† | âš ï¸ |
| 32-INTEGRATION | é›†æˆæµ‹è¯• | ğŸŸ¦ ç©ºé—² | âœ… å­˜åœ¨ | âš ï¸ |
| 33-DOCS | æ–‡æ¡£æ›´æ–° | ğŸŸ¦ ç©ºé—² | âŒ æœªå®Œæˆ | âš ï¸ |

**ç»“è®º**: 14 ä¸ªä»»åŠ¡å…¨éƒ¨æ˜¾ç¤ºä¸ºç©ºé—²ï¼Œä½†å®é™… 10+ ä¸ªå·²å®Œæˆ

## 3. ç¼ºå£æ±‡æ€»

### 3.1 P0 - å¿…é¡»ä¿®å¤

| ç¼ºå£ | å½±å“ | ä¿®å¤æ–¹æ¡ˆ |
|------|------|----------|
| æ–‡æ¡£çŠ¶æ€ä¸åŒæ­¥ | é¡¹ç›®ç®¡ç†æ··ä¹± | æ›´æ–° v1.1 ä»»åŠ¡çŠ¶æ€ |
| Profile è§£æç¼ºå¤± | æ— æ³•ä»»åŠ¡çº§é…ç½® | task_parser æ·»åŠ  Profile |
| Config agents ç¼ºå¤± | æ— æ³•å¤šå·¥å…·é…ç½® | Config æ·»åŠ  agents å­—æ®µ |

### 3.2 P1 - é‡è¦å¢å¼º

| ç¼ºå£ | å½±å“ | ä¿®å¤æ–¹æ¡ˆ |
|------|------|----------|
| å·¥å…·ç”Ÿæˆå™¨ä¸è¶³ | å·¥å…·è¦†ç›–ä¸å…¨ | è¡¥å…¨ 8+ ç”Ÿæˆå™¨ |
| Config ç‰ˆæœ¬å· | ç‰ˆæœ¬è¯†åˆ«é”™è¯¯ | æ›´æ–°é»˜è®¤å€¼ä¸º "1.2" |

### 3.3 P2 - å¯é€‰ä¼˜åŒ–

| ç¼ºå£ | å½±å“ | ä¿®å¤æ–¹æ¡ˆ |
|------|------|----------|
| update --templates | å‡æ›´æ–° | å®ç°è¿œç¨‹è·å–é€»è¾‘ |
| goto è‡ªåŠ¨æ‰§è¡Œ | ç”¨æˆ·ä½“éªŒ | æ·»åŠ  subprocess æ‰§è¡Œ |
| .j2 æ¨¡æ¿ | æ¶æ„ä¸€è‡´æ€§ | è¿ç§»åˆ° Jinja2 |

## 4. ä¾èµ–åˆ†æ

```
v1.2 ä»»åŠ¡ä¾èµ–å›¾:

[Wave 0] æ–‡æ¡£åŒæ­¥
    â””â”€â”€ æ›´æ–° v1.1 ä»»åŠ¡çŠ¶æ€

[Wave 1] æ ¸å¿ƒåŠŸèƒ½
    â”œâ”€â”€ task_parser Profile è§£æ â† ç‹¬ç«‹
    â”œâ”€â”€ Config agents å­—æ®µ â† ç‹¬ç«‹
    â””â”€â”€ Config ç‰ˆæœ¬å·æ›´æ–° â† ç‹¬ç«‹

[Wave 2] å·¥å…·æ‰©å±•
    â””â”€â”€ è¡¥å…¨å‘½ä»¤ç”Ÿæˆå™¨ â† ä¾èµ– Wave 0 (çŸ¥é“å“ªäº›å·²å®ç°)

[Wave 3] å¢å¼ºåŠŸèƒ½
    â”œâ”€â”€ update --templates â† ç‹¬ç«‹
    â””â”€â”€ goto è‡ªåŠ¨æ‰§è¡Œ â† ç‹¬ç«‹

[Wave 4] æµ‹è¯• & æ–‡æ¡£
    â”œâ”€â”€ æ–°åŠŸèƒ½å•å…ƒæµ‹è¯• â† ä¾èµ– Wave 1-3
    â”œâ”€â”€ é›†æˆæµ‹è¯•å¢å¼º â† ä¾èµ– Wave 1-3
    â””â”€â”€ v1.2 æ–‡æ¡£å®Œå–„ â† ä¾èµ– Wave 0-3
```

## 5. é£é™©è¯„ä¼°

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| Profile è§£ææ”¹åŠ¨å½±å“ç°æœ‰ä»»åŠ¡ | ä¸­ | é«˜ | å‘åå…¼å®¹ï¼ŒProfile å¯é€‰ |
| agents é…ç½®æ”¹åŠ¨å½±å“ç°æœ‰é¡¹ç›® | ä¸­ | ä¸­ | è¿ç§»è„šæœ¬ï¼Œä¿ç•™å•ä¸€ agent |
| å·¥å…·ç”Ÿæˆå™¨æ ¼å¼ä¸ä¸€è‡´ | ä½ | ä½ | ç»Ÿä¸€ä½¿ç”¨ CommandGenerator åŸºç±» |
| æµ‹è¯•è¦†ç›–ä¸è¶³ | ä¸­ | ä¸­ | æ–°åŠŸèƒ½å¿…é¡»æœ‰æµ‹è¯• |
