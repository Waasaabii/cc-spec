version: '1.4'
project_name: cc-spec
tech_requirements_sources:
- .claude/CLAUDE.md
- AGENTS.md
- pyproject.toml
- package.json
subagent:
  max_concurrent: 10
  common:
    model: sonnet
    timeout: 300000
    permissionMode: default
agents:
  enabled:
  - claude
  default: claude
scoring:
  pass_threshold: 80
  auto_retry: false
  dimensions:
    functionality:
      weight: 30
      keywords:
      - 功能
      - 实现
      - 需求
      - feature
      - implement
      - create
      - add
    code_quality:
      weight: 25
      keywords:
      - 代码
      - 规范
      - 重构
      - quality
      - lint
      - refactor
      - style
    test_coverage:
      weight: 25
      keywords:
      - 测试
      - test
      - 覆盖
      - 用例
      - coverage
      - unit
      - integration
    documentation:
      weight: 20
      keywords:
      - 文档
      - 注释
      - 类型
      - doc
      - comment
      - type
      - docstring
lock:
  timeout_minutes: 30
  use_git_commit: false
  cleanup_on_start: true
kb:
  chunking:
    strategy: ast-only
    ast:
      enabled: true
      max_chunk_chars: 2000
      chunk_overlap_nodes: 1
      supported_extensions:
      - .py
      - .ts
      - .tsx
      - .js
      - .jsx
      - .go
      - .rs
      - .java
      - .kt
      - .cs
      - .c
      - .cpp
      - .h
      - .hpp
      - .rb
      - .php
      - .swift
      - .scala
    line:
      lines_per_chunk: 100
      overlap_lines: 10
    llm:
      enabled: true
      priority_files:
      - readme.md
      - readme
      - main.py
      - app.py
      - index.ts
      - index.js
      - __init__.py
      - setup.py
      - pyproject.toml
      - package.json
      max_content_chars: 120000
  update:
    post_task_sync:
      enabled: true
      strategy: smart
    incremental_triggers:
    - file_modified
    - file_added
    - file_deleted
    - file_renamed
    exclude_patterns:
    - '*.pyc'
    - __pycache__/**
    - .git/**
    - node_modules/**
    - .cc-spec/**
  retrieval:
    pre_execution:
      enabled: true
      sources:
      - workflow_records
      - code_chunks
      max_chunks: 10
      max_tokens: 8000
    strategy:
      type: hybrid
    relevance:
      min_score: 0.5
      boost_same_file: 1.5
      boost_recent_workflow: 2.0
